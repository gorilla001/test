<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>有菜</title>
    <script type="text/javascript" src="./static/script/core.js?__inline"></script>
    <link rel="stylesheet" type="text/css" href="static/style/app.scss"/>
    <script src="bower_components/zepto/zepto.min.js"></script>
    <script src="bower_components/vue/dist/vue.min.js"></script>
    <script src="bower_components/vue-router/dist/vue-router.min.js"></script>
    <script src="bower_components/vue-resource/dist/vue-resource.min.js"></script>
    <script src="bower_components/store2/dist/store2.min.js"></script>

    <script type="text/javascript" src="static/script/iscroll.js"></script>

    <style>
        /*.v-link-active {*/
        /*color: red;*/
        /*}*/
    </style>

    <script type="text/javascript">

    </script>

</head>
<!--<body onload="loaded()">-->
<body>
<div id="app">
    <router-view></router-view>
</div>

<!-- component template -->

<!--首页-->
<script type="text/x-template" id="index-template">
    <div id="p-index">
        <div class="title"><h2>农庄优选</h2></div>
        <!--<div class="title">农庄优选</div>-->
        <div class="box">
            <a v-repeat="recom_item:recom_item_list" v-link="{ path: '/recomitem/' + recom_item.id }">
                <img v-attr="src:recom_item.imgs[0]+'?imageView2/2/w/400/h/300'"/>

                <div class="detail-box">
                    <h3 class="one">(% recom_item.title %)</h3>

                    <div class="row-1 text_1">
                        <span>(% recom_item.packw/500 %)斤/份</span><span>(% recom_item.sales %)人选择</span></div>
                    <div class="row text_2"><span class="price">￥(% (recom_item.price*0.01).toFixed(2) %)</span><span>￥(% (recom_item.mprice*0.01).toFixed(2) %)</span>
                    </div>
                </div>
            </a>
        </div>

        <div class="list-box" v-on="scroll: onScroll($event)">
            <section class="list-block" v-repeat="list">
                <a class="row btn" v-link="{ path: '/detail/'+id }">
                    <div class="col-20 img-box"><img v-attr="src: img"/></div>
                    <div class="detail-box">
                        <h2>(% title %)</h2>

                        <p>(% phone %)</p>

                        <p>(% address %)</p>
                    </div>
                </a>
            </section>
            <c-load has-show="(%'load'==status%)"></c-load>
        </div>

        <div class="row c-bottom-guide">
            <a href="https://store.shequcun.com/about/ycabout" target="_blank">了解有菜</a>
            <a href="https://cun.im/yc" target="_blank">下载APP</a>
        </div>
    </div>
</script>

<!--单品详情-->
<script type="text/x-template" id="recom-item-template">
    <div id="p-recom-item">
        <!--<a id="go-index" v-link="{ path: '/index'}">首页</a>-->
        <div class="row-1 top">
            <a v-link="{ path: '/index'}">首页</a>
            <!--<img src="./static/img/qr_code.png" v-on="click:show_qr_code=true"/>-->
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUE4NjVCRDg2OTg1MTFFNUI1NUJFMUY5NTgwNEE5MDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUE4NjVCRDk2OTg1MTFFNUI1NUJFMUY5NTgwNEE5MDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMUJGQzUwOTY5ODMxMUU1QjU1QkUxRjk1ODA0QTkwNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMUJGQzUwQTY5ODMxMUU1QjU1QkUxRjk1ODA0QTkwNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuPDX0sAAAbXSURBVHja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"
                 v-on="click:show_qr_code=true"/>
        </div>

        <div class="slide" id="slide">
            <ul>
                <li v-repeat="img in data.imgs">
                    <!--<a href="#">-->
                    <!--<img v-attr="src:" src="((%img%))?imageView2/2/w/400/h/300"-->
                    <img v-attr="src:img+'?imageView2/2/w/400/h/300'" alt="">
                    <!--</a>-->
                </li>
            </ul>
            <div class="dot">
                <span v-repeat="data.imgs"></span>
            </div>
        </div>
        <section class="info">
            <h2>(% data.title %)</h2>

            <div class="m-b-30">(% data.descr %)</div>
            <div>
                <span class="price f-z-lg">￥(% (data.price*0.01).toFixed(2) %)</span>
                <span class="mprice f-z-sm t-d-l-t">￥(% (data.mprice*0.01).toFixed(2) %)</span>
                <span class="sales f-z-sm">(% data.sales %)人选择</span>
            </div>
        </section>
        <section class="m-b-1">商品规格：(% data.packw/500 %)斤/份</section>
        <section class="m-b-1">存储方法：(% data.detail && data.detail.storage %)</section>
        <section class="">
            <!--<a class="btn a-right" href="/yc_farm/(%data.fid%)">来自农庄：(%data.farm%)</a>-->
            <a class="a-right" href="https://store.shequcun.com/yc_farm/((%data.fid%))">来自农庄：(% data.farm %)</a>
        </section>
        <section class="img1">
            <img src="https://store.shequcun.com/static/page/yc/img/item_chapter.png"/>
        </section>
        <section class="detail m-b-0">
            <div class="content">(% data.detail && data.detail.content %)</div>
        </section>
        <div class="detail-image" v-show="src:data.detail && data.detail.image">
            <img v-attr="src:data.detail && data.detail.image+'?imageView2/2/w/400'"/>
        </div>
        <c-bottom-buy></c-bottom-buy>

        <div class="show_img c-modal c-modal-active" v-show="show_qr_code" v-on="click:show_qr_code=false">
            <div class="box">
                <img v-attr="src:'data:image/png;base64,'+data.qrcode"/>

                <div class="text">扫一扫上面的二维码图案，购买菜品</div>
            </div>
        </div>
        <c-dimmer active="(% show_qr_code %)"></c-dimmer>
    </div>

</script>

<!--购买页-->
<script type="text/x-template" id="buy-template">
    <div id="p-buy">
        <section class="block address">
            <a class="row-1 btn" v-link="{ path: '/address'}">
                <div class="info">
                    <div><span>(% address.name %)</span>(% address.mobile %)</div>
                    <div class="f-z-26 text">地址：(% address.city + address.region + address.address %)</div>
                </div>
                <!--<div>></div>-->
                <img class="icon" src="./static/img/icon_right.png"/>
            </a>
        </section>

        <section class="block item-list" v-repeat="item : cart_list">
            <div class="row">
                <img v-attr="src: item.img + '?imageView2/2/w/330/h/330'"/>

                <div class="detail">
                    <h2>(% item.title %)</h2>

                    <div class="row-1">
                        <div>￥(% (item.price*0.01).toFixed(2) %)</div>
                        <div>×(% item.count %)</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="block row m-b-1 memo">
            <div>备注</div>
            <div v-on="click:input()">(% memo %)</div>
            <!--<div v-on="click: show_textarea=true ">(% memo %)</div>-->
            <!--<a class="row-1 btn" v-link="{ path: '/memo'}"></a>-->
        </section>
        <section class="block row-1 m-b-30 freight">
            <div>运费</div>
            <div v-show="has_freight && all_price < limit"><span>（满99免运费）</span>￥(% (freight*0.01).toFixed(0) %)</div>
            <div v-show="!has_freight || all_price >= limit"><span>免运费</span></div>
        </section>

        <section class="block row-1 m-b-1 amount">
            <div>请支付金额</div>
            <div>￥(% (all_price*0.01).toFixed(2) %)</div>
        </section>
        <section class="block row-1 pay m-b-1">
            <img src="static/img/pay_weixin.png"/>

            <div v-on="click:created_order('wx')">微信支付<img class="icon" src="./static/img/icon_right.png"/></div>
        </section>
        <section class="block row-1 pay m-b-0">
            <img src="static/img/pay_alipay.png"/>

            <div v-on="click:created_order('wx')">支付宝支付<img class="icon" src="./static/img/icon_right.png"/></div>
        </section>
        <c-textarea has-show="(%@ show_textarea %)" text="(%@ memo %)" btn-text="确认" placeholder="请输入内容"></c-textarea>
    </div>
</script>

<!--订单支付结果页-->
<script type="text/x-template" id="pay-result-template">
    <div id="p-pay-result">
        <div class="box">
            <div class="img">
                <img src="/static/img/pay_result_1.png"/>
            </div>
            <div>支付成功！</div>
            <div>我们会按时为您配送订单</div>
        </div>
        <div class="row c-bottom-guide">
            <a href="https://cun.im/yc" target="_blank">下载APP查看我的订单</a>
        </div>
    </div>
</script>

<!--登录页-->
<script type="text/x-template" id="login-template">
    <div id="p-login">
        <div>
            <div class="logo">
                <img src="./static/img/logo.png">
            </div>
            <form>
                <div class="box">
                    <div class="row-r">
                        <input type="tel" v-model="mobile" placeholder="输入手机号" maxlength="11"/>
                        <span class="send-sms" v-class="activity : !has_disabled_send_smscode" v-on="click:sendSms()">(% text %)</span>
                    </div>
                    <div>
                        <input type="tel" v-model="smscode" maxlength="6" placeholder="验证码"/>
                    </div>
                </div>
                <input type="button" class="submit" v-on="click:submit()" value="登录"/>
            </form>
        </div>
    </div>
</script>

<!--我的地址列表-->
<script type="text/x-template" id="address-template">
    <div id="p-address" class="f-z">
        <section class="block add" v-if="address_list.length < 5">
            <a class="row btn" v-link="{ path: '/address/0'}">
                <img src="static/img/add.png"/>
                <span>添加地址</span>
            </a>
        </section>
        <section class="block box-2 item-list" v-repeat="address_list" v-class="activity : default"
                 v-on="click:selectAddress($data, $index)">
            <div class="box-2">
                <img class="default" src="static/img/default.png"/>
                <!--<a class="btn" v-link="{ path: '/address/' + id}">-->
                <div class="info">
                    <p class="user-info"><span>(% name %)</span>(% mobile %)</p>

                    <p class="f-z-sm address-info">(% city + region + address %)</p>
                </div>
                <!--</a>-->
            </div>
            <img class="i-edit" src="static/img/edit.png" v-on="click:edit($data, $index, $event)"/>
        </section>
    </div>
</script>

<!--我的地址详情-->
<script type="text/x-template" id="address-detail-template">
    <div id="p-address-detail" class="f-z">
        <div class="head">联系人</div>
        <div class="row body">
            <div>姓名：</div>
            <input type="text" v-model="address.name" placeholder="请填写收货人的姓名"/>
        </div>
        <div class="row body">
            <div>电话：</div>
            <input type="tel" v-model="address.mobile" placeholder="请填写收货手机号码"/>
        </div>

        <div class="head">收货地址</div>
        <div class="body row zone">
            <div>
                所在区域：
            </div>
            <!--
            <div v-on="click:input()">
                <img src="static/img/location.png"/>
                <input type="text" readonly placeholder="点击选择"/>
            </div>
            -->
            <!--<input type="text" readonly placeholder="请选择您所在的城市、区域" v-on="click:select_region()"/>-->
            <div class="styled-select">
                <select v-model="address.region">
                    <option v-repeat="region in region_list" value="(% region.name %)">(% region.name %)</option>
                </select>
            </div>
        </div>
        <!--<div class="body">楼号-门牌号：<input type="text" placeholder="例:12号楼1501室"/></div>-->
        <div class="body row">
            <div>街道地址：</div>
            <input type="text" v-model="address.address" placeholder="请输入您小区所在街道和名字"/>
        </div>

        <div class="btn-box">
            <button class="btn" v-on="click:save()">保存</button>
        </div>
    </div>
</script>

<!--留言-->
<!--
<script type="text/x-template" id="memo-template">
    <div id="p-memo" class="f-z">
        <textarea class="f-z-sm" rows="7" placeholder="留言给农庄"></textarea>

        <div class="btn-box">
            <button class="btn">确认</button>
        </div>
    </div>
</script>
-->

<!--输入-->
<script type="text/x-template" id="input-template">
    <div id="p-input" class="f-z">
        <textarea class="f-z-sm" rows="7" v-attr="placeholder:placeholder"></textarea>

        <div class="btn-box">
            <button class="btn" v-on="click:submit()">(% btnText %)</button>
        </div>
    </div>
</script>

<script type="text/javascript" src="static/component/slide/swipeSlide.min.js"></script>

<script src="static/app.js" type="text/javascript"></script>
{% raw xsrf_form_html() %}
</body>
</html>
