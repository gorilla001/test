<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>有菜</title>
    <script>
        !function () {
            var a = "@charset \"utf-8\";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}", b = document.createElement("style");
            if (document.getElementsByTagName("head")[0].appendChild(b), b.styleSheet)b.styleSheet.disabled || (b.styleSheet.cssText = a); else try {
                b.innerHTML = a
            } catch (c) {
                b.innerText = a
            }
        }();
        !function (a, b) {
            function c() {
                var b = f.getBoundingClientRect().width;
                b / i > 540 && (b = 540 * i);
                var c = b / 10;
                f.style.fontSize = c + "px", k.rem = a.rem = c
            }

            var d, e = a.document, f = e.documentElement, g = e.querySelector('meta[name="viewport"]'), h = e.querySelector('meta[name="flexible"]'), i = 0, j = 0, k = b.flexible || (b.flexible = {});
            if (g) {
                console.warn("将根据已有的meta标签来设置缩放比例");
                var l = g.getAttribute("content").match(/initial\-scale=([\d\.]+)/);
                l && (j = parseFloat(l[1]), i = parseInt(1 / j))
            } else if (h) {
                var m = h.getAttribute("content");
                if (m) {
                    var n = m.match(/initial\-dpr=([\d\.]+)/), o = m.match(/maximum\-dpr=([\d\.]+)/);
                    n && (i = parseFloat(n[1]), j = parseFloat((1 / i).toFixed(2))), o && (i = parseFloat(o[1]), j = parseFloat((1 / i).toFixed(2)))
                }
            }
            if (!i && !j) {
                var p = (a.navigator.appVersion.match(/android/gi), a.navigator.appVersion.match(/iphone/gi)), q = a.devicePixelRatio;
                i = p ? q >= 3 && (!i || i >= 3) ? 3 : q >= 2 && (!i || i >= 2) ? 2 : 1 : 1, j = 1 / i
            }
            if (f.setAttribute("data-dpr", i), !g)if (g = e.createElement("meta"), g.setAttribute("name", "viewport"), g.setAttribute("content", "initial-scale=" + j + ", maximum-scale=" + j + ", minimum-scale=" + j + ", user-scalable=no"), f.firstElementChild)f.firstElementChild.appendChild(g); else {
                var r = e.createElement("div");
                r.appendChild(g), e.write(r.innerHTML)
            }
            a.addEventListener("resize", function () {
                clearTimeout(d), d = setTimeout(c, 300)
            }, !1), a.addEventListener("pageshow", function (a) {
                a.persisted && (clearTimeout(d), d = setTimeout(c, 300))
            }, !1), "complete" === e.readyState ? e.body.style.fontSize = 12 * i + "px" : e.addEventListener("DOMContentLoaded", function () {
                e.body.style.fontSize = 12 * i + "px"
            }, !1), c(), k.dpr = a.dpr = i, k.refreshRem = c, k.rem2px = function (a) {
                var b = parseFloat(a) * this.rem;
                return "string" == typeof a && a.match(/rem$/) && (b += "px"), b
            }, k.px2rem = function (a) {
                var b = parseFloat(a) / this.rem;
                return "string" == typeof a && a.match(/px$/) && (b += "rem"), b
            }
        }(window, window.lib || (window.lib = {}));
    </script>

    <!--<link rel="stylesheet" type="text/css" href="style/index.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="style/detail.css"/>-->
    <link rel="stylesheet" type="text/css" href="static/style/app.css"/>

    <script src="bower_components/zepto/zepto.min.js"></script>
    <!--<script src="bower_components/vue/dist/vue.js"></script>-->
    <script src="bower_components/vue/dist/vue.min.js"></script>
    <script src="bower_components/vue-router/dist/vue-router.min.js"></script>
    <script src="bower_components/vue-resource/dist/vue-resource.min.js"></script>
    <script src="bower_components/store2/dist/store2.min.js"></script>

    <script type="text/javascript" src="static/script/iscroll.js"></script>

    <style>
        /*.v-link-active {*/
        /*color: red;*/
        /*}*/
    </style>

    <script type="text/javascript">

    </script>

</head>
<!--<body onload="loaded()">-->
<body>

<!--<h1>Hello App!</h1>-->
<!--<p>-->
<!--&lt;!&ndash; use v-link directive for navigation. &ndash;&gt;-->
<!--<a v-link="{ path: '/list' }">Go to list</a>-->
<!--<a v-link="{ path: '/detail/111' }">Go to detail</a>-->
<!--</p>-->
<!-- use router-view element as route outlet -->

<div id="app">
    <router-view></router-view>
</div>

<!-- component template -->

<!--首页-->
<script type="text/x-template" id="index-template">
    <div id="p-index">
        <h2>农庄优选</h2>
        <!--<div class="title">农庄优选</div>-->
        <div class="box">
            <a v-repeat="recom_item:recom_item_list" v-link="{ path: '/recomitem/' + recom_item.id }">
                <img v-attr="src:recom_item.imgs[0]+'?imageView2/2/w/400/h/300'"/>

                <div class="detail-box">
                    <h3 class="one">(% recom_item.title %)</h3>

                    <div class="row-1"><span>(% data.packw/500 %)斤/份</span><span>(% recom_item.sales %)人选择</span></div>
                    <div class="row"><span>￥(% (recom_item.price*0.01).toFixed(2) %)</span><span>￥(% (recom_item.mprice*0.01).toFixed(2) %)</span>
                    </div>
                </div>
            </a>
        </div>

        <div class="list-box" v-on="scroll: onScroll($event)">
            <section class="list-block" v-repeat="list">
                <a class="row btn" v-link="{ path: '/detail/'+id }">
                    <div class="col-20 img-box"><img v-attr="src: img"/></div>
                    <div class="detail-box">
                        <h2>(% title %)</h2>

                        <p>(% phone %)</p>

                        <p>(% address %)</p>
                    </div>
                </a>
            </section>
            <c-load has-show="(%'load'==status%)"></c-load>
        </div>

        <div class="row c-bottom-guide">
            <a href="https://store.shequcun.com/about/ycabout" target="_blank">了解有菜</a>
            <a href="https://cun.im/yc" target="_blank">下载APP</a>
        </div>
    </div>
</script>

<!--单品详情-->
<script type="text/x-template" id="recom-item-template">
    <div id="p-recom-item">
        <a id="go-index" v-link="{ path: '/index'}">首页</a>

        <div class="slide" id="slide">
            <ul>
                <li v-repeat="img in data.imgs">
                    <!--<a href="#">-->
                    <!--<img v-attr="src:" src="((%img%))?imageView2/2/w/400/h/300"-->
                    <img v-attr="src:img+'?imageView2/2/w/400/h/300'" alt="">
                    <!--</a>-->
                </li>
            </ul>
            <div class="dot">
                <span v-repeat="data.imgs"></span>
            </div>
        </div>
        <section class="info">
            <h2>(% data.title %)</h2>

            <div class="m-b-30">(% data.descr %)</div>
            <div>
                <span class="price f-z-lg">￥(% (data.price*0.01).toFixed(2) %)</span>
                <span class="mprice f-z-sm t-d-l-t">￥(% (data.mprice*0.01).toFixed(2) %)</span>
                <span class="sales f-z-sm">(% data.sales %)人选择</span>
            </div>
        </section>
        <section class="m-b-1">商品规格：(% data.packw/500 %)斤/份</section>
        <section class="m-b-1">存储方法：(% data.detail && data.detail.storage %)</section>
        <section class="">
            <!--<a class="btn a-right" href="/yc_farm/(%data.fid%)">来自农庄：(%data.farm%)</a>-->
            <a class="btn a-right" href="https://store.shequcun.com/yc_farm/((%data.fid%))">来自农庄：(% data.farm %)</a>
        </section>
        <section class="img1">
            <img src="https://store.shequcun.com/static/page/yc/img/item_chapter.png"/>
        </section>
        <section class="detail m-b-0">
            <div class="content">(% data.detail && data.detail.content %)</div>
        </section>
        <div class="detail-image" v-show="src:data.detail && data.detail.image">
            <img v-attr="src:data.detail && data.detail.image+'?imageView2/2/w/400'"/>
        </div>
        <c-bottom-buy></c-bottom-buy>
    </div>

</script>

<!--购买页-->
<script type="text/x-template" id="buy-template">
    <div id="p-buy">
        <section class="block address">
            <a class="row-1 btn" v-link="{ path: '/address'}">
                <div class="info">
                    <div><span>(% address.name %)</span>(% address.mobile %)</div>
                    <div class="f-z-26 text">地址：(% address.city + address.region + address.address %)</div>
                </div>
                <!--<div>></div>-->
                <img class="icon" src="./static/img/icon_right.png"/>
            </a>
        </section>

        <section class="block item-list" v-repeat="item : cart_list">
            <div class="row">
                <img v-attr="src: item.img + '?imageView2/2/w/330/h/330'"/>

                <div class="detail">
                    <h2>(% item.title %)</h2>

                    <div class="row-1">
                        <div>￥(% (item.price*0.01).toFixed(2) %)</div>
                        <div>×(% item.count %)</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="block row m-b-1 memo">
            <div>备注</div>
            <div v-on="click:input()">(% memo %)</div>
            <!--<div v-on="click: show_textarea=true ">(% memo %)</div>-->
            <!--<a class="row-1 btn" v-link="{ path: '/memo'}"></a>-->
        </section>
        <section class="block row-1 m-b-30 freight">
            <div>运费</div>
            <div v-show="has_freight && all_price < limit"><span>（满99免运费）</span>￥(% (freight*0.01).toFixed(0) %)</div>
            <div v-show="!has_freight || all_price >= limit"><span>免运费</span></div>
        </section>

        <section class="block row-1 m-b-1 amount">
            <div>请支付金额</div>
            <div>￥(% (all_price*0.01).toFixed(2) %)</div>
        </section>
        <section class="block row-1 pay m-b-1">
            <img src="static/img/pay_weixin.png"/>

            <div v-on="click:created_order('wx')">微信支付<img class="icon" src="./static/img/icon_right.png"/></div>
        </section>
        <section class="block row-1 pay m-b-0">
            <img src="static/img/pay_alipay.png"/>

            <div v-on="click:created_order('wx')">支付宝支付<img class="icon" src="./static/img/icon_right.png"/></div>
        </section>
        <c-textarea has-show="(%@ show_textarea %)" text="(%@ memo %)" btn-text="确认" placeholder="请输入内容"></c-textarea>
    </div>
</script>

<!--订单支付结果页-->
<script type="text/x-template" id="pay-result-template">
    <div id="p-pay-result">
        <div class="box">
            <div class="img">
                <img src="/static/img/pay_result_1.png"/>
            </div>
            <div>支付成功！</div>
            <div>我们会按时为您配送订单</div>
        </div>
        <div class="row c-bottom-guide">
            <a href="https://cun.im/yc" target="_blank">下载APP查看我的订单</a>
        </div>
    </div>
</script>

<!--登录页-->
<script type="text/x-template" id="login-template">
    <div id="p-login">
        <div>
            <div class="logo">
                <img src="./static/img/logo.png">
            </div>
            <form>
                <div class="box">
                    <div class="row-r">
                        <input type="tel" v-model="mobile" placeholder="输入手机号" maxlength="11"/>
                        <span class="send-sms" v-class="activity : !has_disabled_send_smscode" v-on="click:sendSms()">(% text %)</span>
                    </div>
                    <div>
                        <input type="text" v-model="smscode" maxlength="6" placeholder="验证码"/>
                    </div>
                </div>
                <input type="button" class="submit" v-on="click:submit()" value="登录"/>
            </form>
        </div>
    </div>
</script>

<!--我的地址列表-->
<script type="text/x-template" id="address-template">
    <div id="p-address" class="f-z">
        <section class="block add">
            <a class="row btn" v-link="{ path: '/address/0'}">
                <img src="static/img/add.png"/>
                <span>添加地址</span>
            </a>
        </section>
        <section class="block row-r item-list" v-repeat="address_list" v-class="activity : default"
                 v-on="click:selectAddress($data, $index)">
            <div class="row">
                <img class="default" src="static/img/default.png"/>
                <!--<a class="btn" v-link="{ path: '/address/' + id}">-->
                <div class="info">
                    <p class="user-info"><span>(% name %)</span>(% mobile %)</p>

                    <p class="f-z-sm address-info">(% city + region + address %)</p>
                </div>
                <!--</a>-->
            </div>
            <img class="i-edit" src="static/img/edit.png" v-on="click:edit($data, $index, $event)"/>
        </section>
    </div>
</script>

<!--我的地址详情-->
<script type="text/x-template" id="address-detail-template">
    <div id="p-address-detail" class="f-z">
        <div class="head">联系人</div>
        <div class="row body">
            <div>姓名：</div>
            <input type="text" v-model="address.name" placeholder="请填写收货人的姓名"/>
        </div>
        <div class="row body">
            <div>电话：</div>
            <input type="tel" v-model="address.mobile" placeholder="请填写收货手机号码"/>
        </div>

        <div class="head">收货地址</div>
        <div class="body row zone">
            <div>
                所在区域：
            </div>
            <!--
            <div v-on="click:input()">
                <img src="static/img/location.png"/>
                <input type="text" readonly placeholder="点击选择"/>
            </div>
            -->
            <!--<input type="text" readonly placeholder="请选择您所在的城市、区域" v-on="click:select_region()"/>-->
            <div class="styled-select">
                <select v-model="address.region">
                    <option v-repeat="region in region_list" value="(% region.name %)">(% region.name %)</option>
                </select>
            </div>
        </div>
        <!--<div class="body">楼号-门牌号：<input type="text" placeholder="例:12号楼1501室"/></div>-->
        <div class="body row">
            <div>街道地址：</div>
            <input type="text" v-model="address.address" placeholder="请输入您小区所在街道和名字"/>
        </div>

        <div class="btn-box">
            <button class="btn" v-on="click:save()">保存</button>
        </div>
    </div>
</script>

<!--留言-->
<!--
<script type="text/x-template" id="memo-template">
    <div id="p-memo" class="f-z">
        <textarea class="f-z-sm" rows="7" placeholder="留言给农庄"></textarea>

        <div class="btn-box">
            <button class="btn">确认</button>
        </div>
    </div>
</script>
-->

<!--输入-->
<script type="text/x-template" id="input-template">
    <div id="p-input" class="f-z">
        <textarea class="f-z-sm" rows="7" v-attr="placeholder:placeholder"></textarea>

        <div class="btn-box">
            <button class="btn" v-on="click:submit()">(% btnText %)</button>
        </div>
    </div>
</script>

<script type="text/javascript" src="static/component/slide/swipeSlide.min.js"></script>

<script src="static/app.js" type="text/javascript"></script>

</body>
</html>
